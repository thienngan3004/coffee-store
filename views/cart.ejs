<!DOCTYPE html>
<html lang="vi">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Gi·ªè h√†ng - Coffee Store</title>
    <link rel="stylesheet" href="/style.css" />
  </head>
  <body>
    <header>
      <h1>Coffee Store</h1>
      <nav>
        <a href="/">Trang ch·ªß</a>
        <a href="/cart">Gi·ªè h√†ng</a>
        <a href="/checkout">Thanh to√°n</a>
        <a href="/auth/profile">H·ªì s∆°</a>
        <% if (user) { %>
          <span>üëã Xin ch√†o, <%= user.username %>!</span>
          <a href="/auth/logout">ƒêƒÉng xu·∫•t</a>
        <% } else { %>
          <a href="/auth/login">ƒêƒÉng nh·∫≠p</a>
          <a href="/auth/register">ƒêƒÉng k√Ω</a>
        <% } %>
      </nav>
    </header>
    
    <main>
      <div class="cart-container">
        <% if (cart && cart.length > 0) { %>
          <% cart.forEach(item => { %>
            <div class="cart-item">
              <h3 class="product-name"><%= item.product.name %></h3>
              <% if (item.product.discount > 0) { %>
                <p class="original-price">
                  Gi√° g·ªëc: <del><%= item.product.price %> VND</del>
                </p>
                <p class="discount-price">
                  Gi√° gi·∫£m: <%= item.priceAfterDiscount.toFixed(0) %> VND
                </p>
              <% } else { %>
                <p class="price">
                  Gi√°: <%= item.product.price %> VND
                </p>
              <% } %>
              <p class="quantity">S·ªë l∆∞·ª£ng: <%= item.quantity %></p>
              <p class="total-item">T·ªïng: <%= item.total.toFixed(0) %> VND</p>
              <button class="remove-item product-button" data-id="<%= item.product._id %>">
                X√≥a
              </button>
            </div>
          <% }); %>
          <h3 class="cart-total">
            T·ªïng c·ªông: <%= total.toFixed(0) %> VND
          </h3>
          <a href="/checkout" class="checkout-btn product-button">
            Ti·∫øn h√†nh thanh to√°n
          </a>
        <% } else { %>
          <p class="empty-cart">Gi·ªè h√†ng c·ªßa b·∫°n tr·ªëng!</p>
          <a href="/" class="back-home-link">
            ‚Üê Quay v·ªÅ trang ch·ªß
          </a>
        <% } %>
      </div>
    </main>
    
    <script src="/script.js"></script>
  </body>
</html>
